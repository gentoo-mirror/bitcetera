--- ruby.eselect-20090723.orig	2009-06-06 10:53:20 +0200
+++ ruby.eselect-20090723	2009-06-06 10:54:50 +0200
@@ -84,10 +84,27 @@
 	
 	create_man_symlinks ${version}
 
+	create_symlinks_to_executables ${version}
+
 	write_list_start "Successfully switched to profile:"
 	write_kv_list_entry "${target}" ""
 }
 
+create_symlinks_to_executables() {	
+	local path="${ROOT}${bindir}/"
+	local version=${1}
+
+	for script in $( grep -il "# this file was generated by rubygems" "${path}"* 2>/dev/null ); do
+		if [[ ! $script =~ (18|19|20|ee)$ ]]; then
+			rm -f "${script}"
+		fi
+	done
+
+	for script in $( grep -il "# this file was generated by rubygems" "${path}"*${version} 2>/dev/null ); do
+		ln -s "${script}" "${script%${version}}"
+	done
+}
+
 ### show action ###
 describe_show() {
 	echo "Prints the current configuration."
@@ -177,3 +194,15 @@
 
 	create_symlinks ${target}
 }
+
+### rebuild action ###
+describe_rebuild() {
+	echo "Rebuild symlinks to gem supplied executables."
+}
+
+do_rebuild() {
+	if [[ -L "${ROOT}${bindir}/ruby" ]] ; then
+		version=$(echo "$(canonicalise ${ROOT}${bindir}/ruby )" | sed -n -e 's/^.*ruby//p' )
+		create_symlinks_to_executables ${version}
+	fi
+}
